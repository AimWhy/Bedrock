import { Split } from '@bedrock-layout/split';
import { Meta, Story, Canvas, ArgsTable, Preview } from '@storybook/addon-docs/';

import { Box } from './Box';
import { argTypes } from './argTypes';

<Meta
  title="Spacer Components/Split"
  component={Split}
  parameters={{ viewMode: "docs" }}
/>

# Split

## Use case

The `Split` component is designed to create a split layout based on a fractional ratio. The `Split` component will enforce a standard spacing scheme through the `gutter` prop and will optionally switch to a stack layout when the provided threshhold is reached.

## Installation

```bash
yarn add @bedrock-layout/split
```

## API

<Story name="API" argTypes={argTypes} />

<ArgsTable story="API" />

## fraction

The `fraction` prop defines the fraction of the container width to use for the split. You can use the following values:

<Canvas withSource="open">
  <Story name="fraction">
    <h3>1/4</h3>
    <Split gutter="lg" fraction="1/4">
      <Box />
      <Box />
    </Split>
    <h3>1/3</h3>
    <Split gutter="lg" fraction="1/3">
      <Box />
      <Box />
    </Split>
    <h3>1/2</h3>
    <Split gutter="lg" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>2/3</h3>
    <Split gutter="lg" fraction="2/3">
      <Box />
      <Box />
    </Split>
    <h3>3/4</h3>
    <Split gutter="lg" fraction="3/4">
      <Box />
      <Box />
    </Split>
    <h3>auto-start</h3>
    <p>(The first box has a width of 100px)</p>
    <Split gutter="lg" fraction="auto-start">
      <Box />
      <Box />
    </Split>
    <h3>auto-end</h3>
    <p>(The second box has a width of 100px)</p>
    <Split gutter="lg" fraction="auto-end">
      <Box />
      <Box />
    </Split>
  </Story>
</Canvas>

## gutter

The `gutter` prop defines the gutter size between elements. Bedrock has implemented a default spacing scheme, but [it can be overridden using the ThemeProvider provided by `styled-components`.](/docs/spacing--page#integrating-with-your-design-system)
You can also use any valid CSSLength or positve integer.

Here are the possible values for `gutter` by default:

<Canvas withSource="open">
  <Story name="gutter">
    <h3>Custom gutter as number (20)</h3>
    <Split gutter={20} fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>Custom gutter as string ("3ch")</h3>
    <Split gutter="3ch" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>none</h3>
    <Split gutter="none" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>xxs</h3>
    <Split gutter="xxs" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>xs</h3>
    <Split gutter="xs" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>sm</h3>
    <Split gutter="sm" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>md</h3>
    <Split gutter="md" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>mdLg</h3>
    <Split gutter="mdLg" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>lg</h3>
    <Split gutter="lg" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>lgXl</h3>
    <Split gutter="lgXl" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>xl</h3>
    <Split gutter="xl" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>xlXXl</h3>
    <Split gutter="xlXXl" fraction="1/2">
      <Box />
      <Box />
    </Split>
    <h3>xxl</h3>
    <Split gutter="xxl" fraction="1/2">
      <Box />
      <Box />
    </Split>
  </Story>
</Canvas>

### With minItemWidth

The `minItemWidth` prop defines the minimum inline size of each child.

If the minimum inline size can not be maintained, it will move to a stacking layout.

(Resize window to observe the changes)

<Canvas withSource="open">
  <Story name="With minItemWidth">
    <h3>With fraction of 2/3 and minItemWidth of 40ch</h3>
    <Split gutter="lg" fraction="2/3" minItemWidth="40ch">
      <Box />
      <Box />
    </Split>
    <h3>With auto-start and minItemWidth of 30ch</h3>
    <Split gutter="lg" fraction="auto-start" minItemWidth="30ch">
      <Box />
      <Box />
    </Split>
  </Story>
</Canvas>

### With switchAt

If you set the `switchAt` property, the inline will switch to a stacking layout if the width of the element is below the threshold set by the `switchAt` property.

This can be used with `minItemWidth` and it will switch to a stacking layout at which ever size is largest.

The below example will switch to a stack when it is less than `45rem`.

(Resize your window to see this in action.)

<Canvas withSource="open">
  <Story name="With switchAt">
    <h3>With fraction:3/4</h3>
    <Split fraction="2/3" gutter="md" switchAt="45rem">
      <Box />
      <Box />
    </Split>
    <h3>With auto-start with 20rem minItemWidth</h3>
    <Split
      fraction="auto-start"
      gutter="md"
      switchAt="45rem"
      minItemWidth="20rem"
    >
      <Box />
      <Box />
    </Split>
  </Story>
</Canvas>

## Playground

Experiment with this story with the Controls addon in the Canvas tab above.

export const Template = (args) =>  (
    <Split {...args}>
      <Box />
      <Box />
    </Split>
);

<Canvas>
  <Story
    name="Playground"
    argTypes={argTypes}
    args={{
      fraction: "1/2",
      gutter: "lg",
      switchAt: "30rem",
      minItemWidth: "30ch",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Playground" />
