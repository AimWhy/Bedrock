import { Split } from '@bedrock-layout/split';
import { Meta, Story, Canvas, ArgsTable} from '@storybook/addon-docs';

import { Component } from './Component';
import { argTypes } from './argTypes';

<Meta
  title="Spacer Components/Split"
  component={Split}
  parameters={{ viewMode: "docs" }}
/>

# Split

## Use case

The `Split` component is designed to create a split layout based on a fractional ratio. The `Split` component will enforce a standard spacing scheme through the `gutter` prop and will optionally switch to a stack layout when the provided threshhold is reached.

## Installation

```bash
yarn add @bedrock-layout/split
```

## API

<Story name="API" argTypes={argTypes} />

<ArgsTable story="API" />

## fraction

The `fraction` prop defines the fraction of the container width to use for the split. You can use the following values:

<Canvas withSource="open">
  <Story name="fraction">
    <h3>1/4</h3>
    <Split gutter="size3" fraction="1/4">
      <Component />
      <Component />
    </Split>
    <h3>1/3</h3>
    <Split gutter="size3" fraction="1/3">
      <Component />
      <Component />
    </Split>
    <h3>1/2</h3>
    <Split gutter="size3" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>2/3</h3>
    <Split gutter="size3" fraction="2/3">
      <Component />
      <Component />
    </Split>
    <h3>3/4</h3>
    <Split gutter="size3" fraction="3/4">
      <Component />
      <Component />
    </Split>
    <h3>auto-start</h3>
    (The first Component has a width of 100px)
    <Split gutter="size3" fraction="auto-start">
      <Component />
      <Component />
    </Split>
    <h3>auto-end</h3>
    (The second Component has a width of 100px)
    <Split gutter="size3" fraction="auto-end">
      <Component />
      <Component />
    </Split>
  </Story>
</Canvas>

## gutter

The `gutter` prop defines the gutter size between elements. Bedrock has implemented a default spacing scheme, but [it can be overridden using the ThemeProvider provided by `@bedrock-layout/spacing-constants`.](/docs/spacing--page#integrating-with-your-design-system)
You can also use any valid CSSLength or positve integer.

Here are the possible values for `gutter` by default:

<Canvas withSource="open">
  <Story name="gutter">
    <h3>Custom gutter as number (20)</h3>
    <Split gutter={20} fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>Custom gutter as string ("3ch")</h3>
    <Split gutter="3ch" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size000</h3>
    <Split gutter="size000" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size00</h3>
    <Split gutter="size00" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size1</h3>
    <Split gutter="size1" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size2</h3>
    <Split gutter="size2" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size3</h3>
    <Split gutter="size3" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size4</h3>
    <Split gutter="size4" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size5</h3>
    <Split gutter="size5" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size6</h3>
    <Split gutter="size6" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size7</h3>
    <Split gutter="size7" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size8</h3>
    <Split gutter="size8" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size9</h3>
    <Split gutter="size9" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size10</h3>
    <Split gutter="size10" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size11</h3>
    <Split gutter="size11" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size12</h3>
    <Split gutter="size12" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size13</h3>
    <Split gutter="size13" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size14</h3>
    <Split gutter="size14" fraction="1/2">
      <Component />
      <Component />
    </Split>
    <h3>size15</h3>
    <Split gutter="size15" fraction="1/2">
      <Component />
      <Component />
    </Split>
  </Story>
</Canvas>

### With minItemWidth

The `minItemWidth` prop defines the minimum inline size of each child.

If the minimum inline size can not be maintained, it will move to a stacking layout.

(Resize window to observe the changes)

<Canvas withSource="open">
  <Story name="With minItemWidth">
    <h3>With fraction of 2/3 and minItemWidth of 40ch</h3>
    <Split gutter="size3" fraction="2/3" minItemWidth="40ch">
      <Component />
      <Component />
    </Split>
    <h3>With auto-start and minItemWidth of 30ch</h3>
    <Split gutter="size3" fraction="auto-start" minItemWidth="30ch">
      <Component />
      <Component />
    </Split>
  </Story>
</Canvas>

### With switchAt

If you set the `switchAt` property, the inline will switch to a stacking layout if the width of the element is below the threshold set by the `switchAt` property.

This can be used with `minItemWidth` and it will switch to a stacking layout at which ever size is largest.

The below example will switch to a stack when it is less than `45rem`.

(Resize your window to see this in action.)

<Canvas withSource="open">
  <Story name="With switchAt">
    <h3>With fraction: 2/3</h3>
    <Split fraction="2/3" gutter="size2" switchAt="45rem">
      <Component />
      <Component />
    </Split>
    <h3>With auto-start with 20rem minItemWidth</h3>
    <Split
      fraction="auto-start"
      gutter="size2"
      switchAt="45rem"
      minItemWidth="20rem"
    >
      <Component />
      <Component />
    </Split>
  </Story>
</Canvas>

## Playground

Experiment with this story with the Controls addon in the Canvas tab above.

export const Template = (args) =>  (
    <Split {...args}>
      <Component />
      <Component />
    </Split>
);

<Canvas>
  <Story
    name="Playground"
    argTypes={argTypes}
    args={{
      fraction: "1/2",
      gutter: "size3",
      switchAt: "30rem",
      minItemWidth: "30ch",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Playground" />
